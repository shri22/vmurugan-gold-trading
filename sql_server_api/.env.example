# ========================================
# VMurugan Gold Trading - Environment Variables
# ========================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ========================================
# Server Configuration
# ========================================
PORT=3001
HTTPS_PORT=443
NODE_ENV=production

# ========================================
# SQL Server Configuration
# ========================================
SQL_SERVER=DESKTOP-3QPE6QQ
SQL_PORT=1433
SQL_DATABASE=VMuruganGoldTrading
SQL_USERNAME=sa
SQL_PASSWORD=your_sql_password_here
SQL_ENCRYPT=false
SQL_TRUST_SERVER_CERTIFICATE=true

# ========================================
# SSL Certificate Paths
# ========================================
SSL_CERT_PATH=../ssl/certificate.crt
SSL_KEY_PATH=../ssl/private.key

# ========================================
# Admin Authentication
# ========================================
# Admin credentials for portal login
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_admin_password_here

# JWT Secret for token generation (use a long random string)
# Same secret is used for both admin and customer tokens
JWT_SECRET=your_jwt_secret_key_minimum_32_characters_long_random_string

# JWT Token expiration
JWT_EXPIRATION=24h  # Admin token expiration (e.g., 24h, 7d, 30d)
CUSTOMER_JWT_EXPIRATION=30d  # Customer token expiration (default: 30 days)

# Static admin token for backward compatibility (will be deprecated)
ADMIN_TOKEN=your_static_admin_token_here

# ========================================
# CORS Configuration
# ========================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://api.vmuruganjewellery.co.in,http://localhost:3000,http://localhost:3001

# ========================================
# Rate Limiting
# ========================================
# General API rate limit (requests per window)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

# Payment endpoint rate limit (more restrictive)
PAYMENT_RATE_LIMIT_MAX=10
PAYMENT_RATE_LIMIT_WINDOW_MS=60000

# OTP rate limit
OTP_RATE_LIMIT_MAX=5
OTP_RATE_LIMIT_WINDOW_MS=300000

# ========================================
# HMAC Request Signing
# ========================================
# Master secret for HMAC signature verification
HMAC_SECRET=your_hmac_master_secret_minimum_64_characters_long_random_string

# Timestamp tolerance in seconds (prevent replay attacks)
HMAC_TIMESTAMP_TOLERANCE=300

# ========================================
# Firebase Configuration
# ========================================
# Path to Firebase service account key (for push notifications)
FIREBASE_SERVICE_ACCOUNT_PATH=./serviceAccountKey.json

# ========================================
# Logging
# ========================================
LOG_LEVEL=info
LOG_DIRECTORY=./logs

# ========================================
# Security
# ========================================
# Enable/disable security features
ENABLE_HMAC_VALIDATION=true
ENABLE_RATE_LIMITING=true
ENABLE_ADMIN_TOKEN_VALIDATION=true

# ========================================
# Gold/Silver Price API (if using external API)
# ========================================
GOLD_PRICE_API_KEY=your_api_key_here
GOLD_PRICE_API_URL=https://api.example.com/gold-price

# ========================================
# Payment Gateway Configuration
# ========================================
# Worldline Payment Gateway
WORLDLINE_MERCHANT_ID=your_worldline_merchant_id
WORLDLINE_SECRET_KEY=your_worldline_secret_key
WORLDLINE_API_KEY=your_worldline_api_key
WORLDLINE_API_URL=https://api.worldline.com
WORLDLINE_CALLBACK_SECRET=your_worldline_callback_secret

# Omniware Payment Gateway
OMNIWARE_MERCHANT_ID=your_omniware_merchant_id
OMNIWARE_SECRET_KEY=your_omniware_secret_key
OMNIWARE_API_KEY=your_omniware_api_key
OMNIWARE_API_URL=https://api.omniware.com
OMNIWARE_CALLBACK_SECRET=your_omniware_callback_secret

# Payment Gateway IP Whitelist (comma-separated)
# Only these IPs can call payment callback endpoints
PAYMENT_GATEWAY_IPS=203.192.241.0,203.192.241.1,127.0.0.1

# Payment Security
PAYMENT_SIGNATURE_SECRET=your_payment_signature_secret_64_chars_minimum
ENABLE_PAYMENT_SIGNATURE_VERIFICATION=true
ENABLE_PAYMENT_IP_WHITELIST=true
